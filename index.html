<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MORY</title>
    <style>
        /* --- Design Tokens --- */
        :root {
            --color-brand-dark: #111827;
            --color-brand-main: #4A7359; /* Deeper green for better contrast */
            --color-brand-light: #F0FDF4;
            --color-bg: #F8F9FA;
            --color-white: #FFFFFF;
            --color-text: #1F2937;
            --color-text-light: #9CA3AF;
            --color-border: #E5E7EB;
            
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            
            /* Desktop Defaults */
            --header-height: 70px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-full: 9999px;
            
            /* Easing */
            --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- Reset & Typography --- */
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body { font-family: var(--font-sans); background: var(--color-bg); color: var(--color-text); line-height: 1.5; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        
        a { text-decoration: none; color: inherit; }
        img { max-width: 100%; display: block; object-fit: cover; }
        button { font-family: inherit; cursor: pointer; border: none; background: none; -webkit-user-select: none; user-select: none; }
        ul { list-style: none; }

        /* --- Scrollbar Polish (Desktop) --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #9CA3AF; }

        /* --- Text Styles --- */
        h1, h2, h3 { font-weight: 800; line-height: 1.1; color: var(--color-brand-dark); letter-spacing: -0.02em; }
        .uppercase { text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.65rem; font-weight: 700; color: var(--color-brand-main); margin-bottom: 0.25rem; display: block; }
        
        /* --- Buttons --- */
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 14px 24px;
            border-radius: var(--radius-full);
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            transition: transform 0.1s, box-shadow 0.2s, background 0.2s;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        /* Tactile Click */
        .btn:active { transform: scale(0.94); } 
        
        .btn-brand { background: var(--color-brand-main); color: white; box-shadow: 0 4px 12px rgba(74, 115, 89, 0.25); }
        .btn-brand:hover { background: #3E5F4A; box-shadow: 0 6px 16px rgba(74, 115, 89, 0.35); transform: translateY(-1px); }
        .btn-outline { border: 1px solid var(--color-border); color: var(--color-text); background: var(--color-white); }
        .btn-danger { background: #FEF2F2; color: #EF4444; padding: 6px 14px; font-size: 0.75rem; border-radius: 8px; width: auto; }

        /* --- Header (Glassmorphism) --- */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height);
            background: rgba(255,255,255, 0.85); backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            z-index: 1000; border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.3s ease;
        }
        header.scrolled { transform: translateY(0); box-shadow: 0 4px 30px rgba(0,0,0,0.05); }
        
        .nav-container { width: 100%; max-width: 1200px; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .brand-logo img { height: 38px; }
        
        .icon-btn { position: relative; padding: 10px; border-radius: 50%; display: flex; transition: background 0.2s; }
        .icon-btn:hover { background: rgba(0,0,0,0.04); }
        .cart-badge {
            position: absolute; top: 0; right: 0; background: var(--color-brand-main); color: white;
            width: 18px; height: 18px; border-radius: 50%; font-size: 0.6rem; font-weight: 700;
            display: flex; align-items: center; justify-content: center;
            transform: scale(0); transition: transform 0.3s var(--ease-elastic);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .cart-badge.visible { transform: scale(1); }

        /* --- Hero Section (Dynamic Slider) --- */
        .hero { position: relative; min-height: 75vh; display: flex; align-items: center; justify-content: center; background: #000; overflow: hidden; }
        
        /* Slideshow Container */
        .hero-slider { position: absolute; inset: 0; z-index: 1; }
        
        /* Individual Slide */
        .hero-slide {
            position: absolute; inset: 0;
            background-size: cover; background-position: center;
            opacity: 0; transition: opacity 1.5s ease-in-out;
            transform: scale(1); transition: transform 6s linear;
        }
        
        /* Active Slide State */
        .hero-slide.active {
            opacity: 0.6; /* Dimmed for text readability */
            transform: scale(1.1); /* Slow Zoom effect */
        }

        .hero-content { position: relative; z-index: 2; text-align: center; color: white; padding: 20px; }
        
        .hero-content h1 { 
            color: white; font-size: clamp(2.5rem, 9vw, 4rem); margin-bottom: 1rem; 
            text-shadow: 0 4px 20px rgba(0,0,0,0.4); 
            opacity: 0; transform: translateY(30px); animation: heroReveal 1s var(--ease-elastic) forwards 0.2s;
        }
        .hero-content p { 
            color: rgba(255,255,255,0.95); font-size: 1.1rem; margin-bottom: 2rem; font-weight: 400;
            opacity: 0; transform: translateY(20px); animation: fadeInUp 0.8s var(--ease-smooth) forwards 0.5s;
        }
        .hero-content .btn { 
            width: auto; opacity: 0; transform: translateY(20px); 
            animation: fadeInUp 0.8s var(--ease-smooth) forwards 0.7s;
        }

        @keyframes heroReveal { to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        /* --- Menu Grid & Cards --- */
        #menu-section { padding: 4rem 20px; max-width: 1200px; margin: 0 auto; }
        .grid-drinks { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 16px; }
        
        .drink-card {
            background: var(--color-white); border-radius: var(--radius-md); overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04); transition: all 0.4s var(--ease-smooth);
            cursor: pointer; border: 1px solid rgba(0,0,0,0.03);
            display: flex; flex-direction: column;
        }
        .drink-card:hover { transform: translateY(-6px); box-shadow: 0 12px 24px rgba(0,0,0,0.08); }
        
        .drink-img-container { position: relative; aspect-ratio: 4/5; background: #E5E7EB; overflow: hidden; }
        .drink-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s var(--ease-smooth); }
        .drink-card:hover .drink-img { transform: scale(1.08); }
        
        .drink-content { padding: 12px; flex: 1; display: flex; flex-direction: column; background: white; position: relative; z-index: 2; }
        .drink-title { font-size: 0.95rem; font-weight: 700; color: var(--color-text); margin-bottom: 4px; line-height: 1.2; }
        .drink-price { color: var(--color-brand-main); font-weight: 700; font-size: 1rem; margin-bottom: 10px; }
        
        .card-action-btn { 
            margin-top: auto; width: 100%; padding: 9px; background: var(--color-brand-light); color: var(--color-brand-main); 
            font-weight: 600; border-radius: 8px; font-size: 0.75rem; display: flex; justify-content: center; align-items: center;
            transition: all 0.2s;
        }
        .card-action-btn:active { transform: scale(0.9); }
        .drink-card:hover .card-action-btn { background: var(--color-brand-main); color: white; }

        /* --- SKELETON LOADER --- */
        .skeleton { background: #E5E7EB; background: linear-gradient(90deg, #E5E7EB 0%, #F3F4F6 50%, #E5E7EB 100%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 4px; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .skeleton-card { opacity: 0.6; }

        /* --- ZOOM PREVIEW (Lightbox) --- */
        #zoom-preview {
            display: none; position: fixed; inset: 0; z-index: 4000;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(8px);
            opacity: 0; transition: opacity 0.3s;
            align-items: center; justify-content: center; padding: 20px;
        }
        #zoom-preview.active { display: flex; opacity: 1; }
        .zoomed-img { max-width: 100%; max-height: 85vh; border-radius: 12px; box-shadow: 0 0 50px rgba(0,0,0,0.5); transform: scale(0.95); transition: transform 0.3s var(--ease-elastic); }
        #zoom-preview.active .zoomed-img { transform: scale(1); }
        .close-zoom { position: absolute; top: 20px; right: 20px; color: white; font-size: 2rem; cursor: pointer; z-index: 4001; background: rgba(255,255,255,0.1); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; }
        .close-zoom:hover { background: rgba(255,255,255,0.2); }

        /* --- CART OVERLAY SYSTEM --- */
        #cart-overlay {
            display: none;
            position: fixed; inset: 0; z-index: 2000;
            background: rgba(248, 249, 250, 0.95);
            backdrop-filter: blur(5px);
        }
        #cart-overlay.active { display: flex; animation: fadeSlideIn 0.3s var(--ease-smooth) forwards; }
        @keyframes fadeSlideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Cart Steps */
        .cart-step { width: 100%; height: 100%; display: flex; flex-direction: column; transition: opacity 0.3s; }
        .cart-step.hidden-step { display: none; opacity: 0; }
        
        .cart-header { background: white; padding: 16px 20px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; height: 65px; flex-shrink: 0; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        .cart-header h2 { font-size: 1.25rem; }

        .cart-body { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }
        .cart-footer { background: white; padding: 20px; border-top: 1px solid var(--color-border); flex-shrink: 0; box-shadow: 0 -4px 20px rgba(0,0,0,0.03); }

        .cart-item-row { 
            background: white; padding: 12px; border-radius: var(--radius-md); border: 1px solid var(--color-border); 
            display: flex; gap: 12px; align-items: center; transition: transform 0.2s;
        }
        .cart-item-row:active { transform: scale(0.98); }
        .cart-item-img { width: 55px; height: 55px; border-radius: 8px; object-fit: cover; background: #eee; }
        
        .qty-selector {
            display: inline-flex; align-items: center; background: #F3F4F6;
            border: 1px solid #E5E7EB; border-radius: 20px; padding: 2px;
        }
        .qty-btn { width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1rem; background: white; color: var(--color-text); transition: all 0.2s; }
        .qty-btn:active { background: var(--color-brand-main); color: white; transform: scale(0.9); }
        .qty-val { width: 30px; text-align: center; font-weight: 700; font-size: 0.9rem; }

        /* --- PRODUCT MODAL --- */
        .modal { display: none; position: fixed; inset: 0; z-index: 3000; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); align-items: center; justify-content: center; padding: 20px; opacity: 0; transition: opacity 0.3s; }
        .modal.show { display: flex; opacity: 1; }
        .modal-content { 
            background: white; width: 100%; max-width: 850px; border-radius: 24px; overflow: hidden; 
            display: flex; flex-direction: column; max-height: 90vh; 
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); transform: scale(0.9); transition: transform 0.4s var(--ease-elastic);
        }
        .modal.show .modal-content { transform: scale(1); }
        @media(max-width: 768px) { .modal-content { height: 92vh; border-radius: 0; } .modal-img-wrapper { width: 100%; height: 280px; } .modal-details { padding: 1.5rem; } }
        @media(min-width: 769px) { .modal-content { flex-direction: row; height: 600px; } .modal-img-wrapper { width: 50%; height: auto; } .modal-details { width: 50%; padding: 3rem; } }

        .zoom-trigger-btn { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); backdrop-filter: blur(5px); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; z-index: 10; transition: transform 0.2s; }
        .zoom-trigger-btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }

        /* --- FORM STYLES --- */
        .form-group label { display: block; font-weight: 600; font-size: 0.8rem; margin-bottom: 5px; color: var(--color-text); }
        .form-input { width: 100%; padding: 12px 14px; border: 1px solid var(--color-border); border-radius: 10px; font-size: 0.95rem; font-family: inherit; transition: border-color 0.2s; background: white; }
        .form-input:focus { border-color: var(--color-brand-main); box-shadow: 0 0 0 3px rgba(74, 115, 89, 0.1); }
        
        .delivery-toggle { display: flex; background: #F3F4F6; padding: 5px; border-radius: 10px; margin-bottom: 1rem; }
        .toggle-opt { flex: 1; text-align: center; padding: 10px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; color: var(--color-text-light); cursor: pointer; transition: all 0.3s var(--ease-smooth); }
        .toggle-opt.active { background: white; color: var(--color-brand-main); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }

        /* --- SUCCESS CHECKMARK ANIMATION --- */
        #success-modal {
            display: none; position: fixed; inset: 0; z-index: 5000;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
            align-items: center; justify-content: center; flex-direction: column;
            animation: fadeIn 0.3s;
        }
        .checkmark-circle { width: 80px; height: 80px; border-radius: 50%; background: var(--color-brand-light); display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
        .checkmark { width: 40px; height: 40px; stroke: var(--color-brand-main); stroke-width: 3; fill: none; stroke-dasharray: 48; stroke-dashoffset: 48; animation: drawCheck 0.6s 0.2s forwards; }
        @keyframes drawCheck { to { stroke-dashoffset: 0; } }

        /* --- Utilities --- */
        .hidden { display: none !important; }
        
        /* --- Responsive --- */
        @media (max-width: 600px) {
            :root { --header-height: 60px; }
            .nav-container { padding: 0 16px; }
            #menu-section { padding: 3rem 16px; }
            .grid-drinks { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .btn { padding: 12px 20px; font-size: 0.8rem; }
            .cart-header, .cart-footer { padding: 16px; }
            .cart-item-img { width: 50px; height: 50px; }
            .form-input { padding: 10px 12px; }
        }
        @media (min-width: 601px) and (max-width: 992px) { .grid-drinks { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 993px) { .grid-drinks { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 24px; } }

    </style>
</head>
<body>

    <!-- SKELETON LOADER (Initially Visible) -->
    <div id="skeleton-loader" style="padding: 4rem 20px; max-width: 1200px; margin: 0 auto;">
        <div class="grid-drinks">
            <!-- 4 Skeletons -->
            <div class="drink-card skeleton-card"><div class="drink-img-container skeleton"></div><div class="drink-content"><div class="skeleton" style="height:15px; width:70%; margin-bottom:8px;"></div><div class="skeleton" style="height:15px; width:30%;"></div></div></div>
            <div class="drink-card skeleton-card"><div class="drink-img-container skeleton"></div><div class="drink-content"><div class="skeleton" style="height:15px; width:70%; margin-bottom:8px;"></div><div class="skeleton" style="height:15px; width:30%;"></div></div></div>
            <div class="drink-card skeleton-card"><div class="drink-img-container skeleton"></div><div class="drink-content"><div class="skeleton" style="height:15px; width:70%; margin-bottom:8px;"></div><div class="skeleton" style="height:15px; width:30%;"></div></div></div>
            <div class="drink-card skeleton-card"><div class="drink-img-container skeleton"></div><div class="drink-content"><div class="skeleton" style="height:15px; width:70%; margin-bottom:8px;"></div><div class="skeleton" style="height:15px; width:30%;"></div></div></div>
        </div>
    </div>

    <!-- HEADER -->
    <header id="main-header">
        <div class="nav-container">
            <a href="#" class="brand-logo" onclick="window.scrollTo({top:0, behavior:'smooth'})">
                <img src="https://raw.githubusercontent.com/ddnetwork-ent/mory-matcha/refs/heads/main/MORY%20LOGO-green.png" alt="MORY">
            </a>
            <div style="position:relative;">
                <button class="icon-btn" onclick="window.openCart()">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
                </button>
                <span class="cart-badge" id="cart-count">0</span>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main id="main-content" style="opacity:0; transition: opacity 0.5s;">
        
        <!-- HERO SECTION WITH DYNAMIC SLIDER -->
        <section class="hero">
            <div class="hero-slider" id="hero-slider">
                <!-- Slides injected via JS -->
            </div>
            
            <div class="hero-content">
                <h1>Stay Mory.</h1>
                <p>Stay Green</p>
                <a href="#menu-section" class="btn btn-brand">Order Now</a>
            </div>
        </section>

        <section id="menu-section">
            <div style="text-align:center; margin-bottom:2.5rem;">
                <span class="uppercase">Menu</span>
                <h2 style="font-size: 1.75rem;">Explore The Menu</h2>
                <p style="font-size:0.95rem; margin-top:0.5rem; color:#6B7280;">Fresh blends made to order.</p>
            </div>
            
            <div class="grid-drinks" id="drinks-grid" style="display:none;">
                <!-- Cards Injected via JS -->
            </div>
        </section>
        
        <footer style="text-align:center; padding:3rem 20px; margin-top:auto; background:white; border-top:1px solid var(--color-border);">
            <p style="font-size:0.85rem; font-weight:600; color:#9CA3AF;">&copy; 2025 MORY. All rights reserved. Led by DDNetwork.</p>
        </footer>
    </main>

    <!-- === ZOOM PREVIEW === -->
    <div id="zoom-preview">
        <button class="close-zoom" onclick="window.closeZoom()">Ã—</button>
        <img id="zoomed-image" src="" class="zoomed-img">
    </div>

    <!-- === CART OVERLAY === -->
    <div id="cart-overlay">
        
        <!-- STEP 1 -->
        <div id="step-1" class="cart-step">
            <div class="cart-header">
                <h2>Your Order</h2>
                <button onclick="window.closeCart()" style="padding:8px; border-radius:50%; background:#f3f4f6;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            </div>
            
            <div class="cart-body" id="cart-list"></div>

            <div class="cart-footer">
                <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:16px;">
                    <span style="font-size:0.8rem; text-transform:uppercase; font-weight:700; color:#6B7280;">Total</span>
                    <span style="font-size:1.8rem; font-weight:800; color:var(--color-text); line-height:1;" id="cart-total-amount">RM0.00</span>
                </div>
                <button class="btn btn-brand" onclick="window.goToStep2()">Proceed to Checkout</button>
            </div>
        </div>

        <!-- STEP 2 -->
        <div id="step-2" class="cart-step hidden-step">
            <div class="cart-header">
                <div style="display:flex; align-items:center; gap:12px;">
                    <button onclick="window.backToStep1()" style="padding:8px; border-radius:50%; background:#f3f4f6;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
                    <h2>Checkout</h2>
                </div>
                <button onclick="window.closeCart()" style="padding:8px; border-radius:50%; background:#f3f4f6;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            </div>

            <div class="cart-body" style="display:block; overflow-y:scroll;">
                <div style="max-width:450px; margin:0 auto; display:flex; flex-direction:column; gap:16px;">
                    <span class="uppercase">Delivery Method</span>
                    <div class="delivery-toggle">
                        <div class="toggle-opt active" id="opt-pickup" onclick="window.setDeliveryType('pickup')">Pick Up ðŸ›’</div>
                        <div class="toggle-opt" id="opt-delivery" onclick="window.setDeliveryType('delivery')">Delivery ðŸ›µ</div>
                    </div>

                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="f-name" class="form-input" placeholder="Your Name">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="f-phone" class="form-input" placeholder="012-345 6789">
                    </div>
                    <div class="form-group hidden" id="group-address">
                        <label>Address</label>
                        <input type="text" id="f-address" class="form-input" placeholder="Unit, Street, Area...">
                    </div>

                    <div style="margin-top:auto; padding-top:20px; border-top:1px solid var(--color-border); display:flex; justify-content:space-between; align-items:flex-end;">
                        <span style="font-size:0.8rem; font-weight:600; color:#6B7280;">Total Payment</span>
                        <h2 style="color:var(--color-brand-main); font-size:1.75rem; line-height:1;" id="final-total">RM0.00</h2>
                    </div>
                </div>
            </div>

            <div class="cart-footer" style="display:flex; gap:12px;">
                <button class="btn btn-outline" onclick="window.backToStep1()">Back</button>
                <button class="btn btn-brand" id="btn-submit" onclick="window.submitOrder()">Send via WhatsApp</button>
            </div>
        </div>

    </div>

    <!-- PRODUCT MODAL -->
    <div id="p-modal" class="modal">
        <div class="modal-content">
            <div class="modal-img-wrapper">
                <img id="pm-img" src="" style="width:100%; height:100%; object-fit:cover;">
                <button class="zoom-trigger-btn" onclick="event.stopPropagation(); window.openZoom()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
                </button>
            </div>
            <div class="modal-details">
                <div style="display:flex; justify-content:space-between; align-items:start; margin-bottom:10px;">
                    <span class="uppercase">Premium Blend</span>
                    <button onclick="window.closePM()" style="padding:6px; border-radius:50%; background:#f3f4f6;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                </div>
                <h2 id="pm-title" style="font-size:1.6rem; margin-bottom:5px;">Title</h2>
                <h3 id="pm-price" style="color:var(--color-brand-main); font-size:1.4rem; margin-bottom:1rem;">RM0</h3>
                <p id="pm-desc" style="color:#6B7280; font-size:0.95rem; line-height:1.6; margin-bottom:1.5rem;">Description</p>
                
                <div style="margin-top:auto;">
                    <div style="display:flex; align-items:center; justify-content:center; margin-bottom:1.5rem;">
                        <div class="qty-selector">
                            <button class="qty-btn" onclick="window.changePQty(-1)">âˆ’</button>
                            <span class="qty-val" id="pm-qty">1</span>
                            <button class="qty-btn" onclick="window.changePQty(1)">+</button>
                        </div>
                    </div>
                    <button class="btn btn-brand" onclick="window.addFromPM()">Add to Order</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SUCCESS MODAL -->
    <div id="success-modal">
        <div class="checkmark-circle">
            <svg class="checkmark" viewBox="0 0 52 52"><path d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>
        </div>
        <h2 style="font-size:1.5rem; color:var(--color-brand-main);">Order Sent!</h2>
        <p style="color:#6B7280;">Redirecting to WhatsApp...</p>
    </div>

    <a id="wa-link" href="" target="_blank" style="display:none;"></a>

    <script>
        const WA_NUMBER = "60122600969";
        const products = {
            'strawberry': { title: 'Strawberry Matcha', price: 12, img: 'https://raw.githubusercontent.com/ddnetwork-ent/mory-matcha/refs/heads/main/Strawberry%20Matcha.jpg', desc: 'Fresh strawberries blended with premium ceremonial matcha. A perfect balance of sweet berry notes and earthy green tea.' },
            'blueberry': { title: 'Blueberry Matcha', price: 14, img: 'https://raw.githubusercontent.com/ddnetwork-ent/mory-matcha/refs/heads/main/Blueberry%20Matcha.jpg', desc: 'A tart and sweet fusion of wild blueberries and earthy matcha. Our blueberries are slow-cooked to release their natural sugars.' },
            'latte': { title: 'Matcha Latte', price: 10, img: 'https://raw.githubusercontent.com/ddnetwork-ent/mory-matcha/refs/heads/main/Matcha%20Latte.jpg', desc: 'Smooth and creamy matcha whisked with your choice of milk. We use organic oat milk as our house standard.' },
            'mango': { title: 'Mango Matcha', price: 14, img: 'https://raw.githubusercontent.com/ddnetwork-ent/mory-matcha/refs/heads/main/Mango%20Matcha.jpg', desc: 'Tropical mango puree layered over our signature matcha blend. Made with Alphonso mangoes for richest flavor.' }
        };

        let cart = JSON.parse(localStorage.getItem('mory_cart')) || [];
        let pmKey = null; let pmQty = 1;
        let deliveryType = 'pickup';

        // --- Init & Loaders ---
        window.onload = () => {
            updateBadge();
            initHeroSlider(); // NEW: Initialize Slider
            setTimeout(() => {
                document.getElementById('skeleton-loader').style.display = 'none';
                document.getElementById('main-content').style.opacity = '1';
                renderDrinks();
            }, 800); // Fake load time for effect
        };
        
        // --- NEW: Hero Slider Logic ---
        function initHeroSlider() {
            const slider = document.getElementById('hero-slider');
            const productImages = Object.values(products).map(p => p.img);
            
            productImages.forEach((imgUrl, index) => {
                const slide = document.createElement('div');
                slide.className = 'hero-slide';
                slide.style.backgroundImage = `url('${imgUrl}')`;
                if(index === 0) slide.classList.add('active');
                slider.appendChild(slide);
            });

            let currentIndex = 0;
            const slides = document.querySelectorAll('.hero-slide');
            
            setInterval(() => {
                slides[currentIndex].classList.remove('active');
                currentIndex = (currentIndex + 1) % slides.length;
                slides[currentIndex].classList.add('active');
            }, 5000); // Change every 5 seconds
        }

        // Parallax Effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('main-header');
            const heroContent = document.querySelector('.hero-content');
            const scrolled = window.scrollY;
            
            if(scrolled > 50) header.classList.add('scrolled');
            else header.classList.remove('scrolled');
            
            if(scrolled < 800) {
                // Simple parallax on text content
                heroContent.style.transform = `translateY(${scrolled * 0.3}px)`;
                heroContent.style.opacity = 1 - (scrolled / 700);
            }
        });

        function renderDrinks() {
            const grid = document.getElementById('drinks-grid');
            grid.style.display = 'grid';
            grid.innerHTML = '';
            
            Object.keys(products).forEach((key, idx) => {
                const p = products[key];
                const div = document.createElement('div');
                div.className = 'drink-card';
                div.onclick = () => window.openModal(key);
                div.style.opacity = '0'; 
                div.style.animation = `fadeInUp 0.5s var(--ease-elastic) forwards ${idx * 0.1}s`;
                
                div.innerHTML = `
                    <div class="drink-img-container">
                        ${idx===0 ? '<span style="position:absolute; top:10px; left:10px; background:white; padding:4px 10px; border-radius:12px; font-size:0.65rem; font-weight:bold; box-shadow:0 2px 4px rgba(0,0,0,0.1); z-index:2;">Best Seller</span>' : ''}
                        <img class="drink-img" src="${p.img}" loading="lazy">
                    </div>
                    <div class="drink-content">
                        <div class="drink-title">${p.title}</div>
                        <div class="drink-price">RM${p.price}</div>
                        <button class="card-action-btn" onclick="event.stopPropagation(); window.quickAdd('${key}')">
                            <span>Quick Add</span>
                        </button>
                    </div>
                `;
                grid.appendChild(div);
            });
        }

        // --- Zoom Logic ---
        window.openZoom = function() {
            const imgSrc = document.getElementById('pm-img').src;
            const zoomOverlay = document.getElementById('zoom-preview');
            const zoomImg = document.getElementById('zoomed-image');
            zoomImg.src = imgSrc;
            zoomOverlay.classList.add('active');
        };

        window.closeZoom = function() {
            document.getElementById('zoom-preview').classList.remove('active');
        };

        // --- Cart Logic ---
        function saveCart() {
            localStorage.setItem('mory_cart', JSON.stringify(cart));
            updateBadge();
            renderCartList();
        }

        function updateBadge() {
            const total = cart.reduce((a, b) => a + b.qty, 0);
            document.getElementById('cart-count').textContent = total;
            document.getElementById('cart-count').classList.toggle('visible', total > 0);
        }

        function quickAdd(key) {
            const p = products[key];
            const ex = cart.find(i => i.key === key);
            if(ex) ex.qty++;
            else cart.push({ key, ...p, qty: 1 });
            saveCart();
        }

        function openCart() {
            document.getElementById('cart-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            backToStep1();
        }

        function closeCart() {
            document.getElementById('cart-overlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function renderCartList() {
            const list = document.getElementById('cart-list');
            list.innerHTML = '';
            let total = 0;

            if(cart.length === 0) {
                list.innerHTML = `<div style="text-align:center; padding:3rem; display:flex; flex-direction:column; align-items:center; gap:1rem; opacity:0.5;"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#9CA3AF" stroke-width="1.5"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg><h3>Cart is empty</h3></div>`;
                document.getElementById('cart-total-amount').textContent = 'RM0.00';
                document.getElementById('final-total').textContent = 'RM0.00';
                return;
            }

            cart.forEach((item, idx) => {
                total += item.price * item.qty;
                const div = document.createElement('div');
                div.className = 'cart-item-row';
                div.innerHTML = `
                    <img src="${item.img}" class="cart-item-img">
                    <div style="flex:1;">
                        <div style="font-weight:700; font-size:0.95rem;">${item.title}</div>
                        <div style="font-size:0.8rem; color:#6B7280; margin-bottom:6px;">RM${item.price.toFixed(2)}</div>
                        <div class="qty-selector">
                            <button class="qty-btn" onclick="window.changeQty(${idx}, -1)">âˆ’</button>
                            <span class="qty-val">${item.qty}</span>
                            <button class="qty-btn" onclick="window.changeQty(${idx}, 1)">+</button>
                        </div>
                    </div>
                    <button class="btn-danger" onclick="window.removeItem(${idx})">Remove</button>
                `;
                list.appendChild(div);
            });

            const formattedTotal = 'RM' + total.toFixed(2);
            document.getElementById('cart-total-amount').textContent = formattedTotal;
            document.getElementById('final-total').textContent = formattedTotal;
        }

        function changeQty(idx, delta) {
            if(cart[idx].qty + delta > 0) { cart[idx].qty += delta; saveCart(); }
        }

        function removeItem(idx) { cart.splice(idx, 1); saveCart(); }

        // --- Checkout Steps ---
        function goToStep2() {
            if(cart.length === 0) return;
            document.getElementById('step-1').classList.add('hidden-step');
            document.getElementById('step-2').classList.remove('hidden-step');
            document.getElementById('step-2').style.display = 'flex'; // Re-trigger flex for animation
        }

        function backToStep1() {
            document.getElementById('step-2').classList.add('hidden-step');
            document.getElementById('step-2').style.display = 'none';
            document.getElementById('step-1').classList.remove('hidden-step');
        }

        function setDeliveryType(type) {
            deliveryType = type;
            document.getElementById('opt-pickup').classList.toggle('active', type === 'pickup');
            document.getElementById('opt-delivery').classList.toggle('active', type === 'delivery');
            document.getElementById('group-address').classList.toggle('hidden', type !== 'delivery');
        }

        function submitOrder() {
            if(cart.length === 0) return;
            const name = document.getElementById('f-name').value.trim();
            const phone = document.getElementById('f-phone').value.trim();
            const addr = document.getElementById('f-address').value.trim();

            if(!name || !phone) return alert("Please enter Name and Phone.");
            if(deliveryType === 'delivery' && !addr) return alert("Please enter Address.");

            const successModal = document.getElementById('success-modal');
            successModal.style.display = 'flex';

            let msg = `*NEW ORDER - MORY*%0A%0A`;
            msg += `Type: ${deliveryType.toUpperCase()}%0A`;
            if(deliveryType === 'delivery') msg += `Address: ${addr}%0A`;
            msg += `%0A*Order Details:*%0A`;
            let total = 0;
            cart.forEach(i => {
                const sub = i.price * i.qty;
                total += sub;
                msg += `- ${i.title} (x${i.qty}): RM${sub.toFixed(2)}%0A`;
            });
            msg += `%0A*Total: RM${total.toFixed(2)}*%0A`;
            msg += `Customer: ${name} (${phone})`;

            setTimeout(() => {
                document.getElementById('wa-link').href = `https://wa.me/${WA_NUMBER}?text=${msg}`;
                document.getElementById('wa-link').click();
                successModal.style.display = 'none';
                closeCart();
            }, 1500);
        }

        // --- Product Modal ---
        function openModal(key) {
            const p = products[key];
            pmKey = key; pmQty = 1;
            document.getElementById('pm-qty').textContent = 1;
            document.getElementById('pm-img').src = p.img;
            document.getElementById('pm-title').textContent = p.title;
            document.getElementById('pm-price').textContent = 'RM' + p.price.toFixed(2);
            document.getElementById('pm-desc').textContent = p.desc;
            const m = document.getElementById('p-modal');
            m.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePM() {
            document.getElementById('p-modal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        function changePQty(d) {
            if(pmQty + d > 0) { pmQty += d; document.getElementById('pm-qty').textContent = pmQty; }
        }

        function addFromPM() {
            const p = products[pmKey];
            const ex = cart.find(i => i.key === pmKey);
            if(ex) ex.qty += pmQty;
            else cart.push({ key: pmKey, ...p, qty: pmQty });
            saveCart();
            closePM();
        }
    </script>
</body>
</html>
